# CLAUDE.md — claudeskills

This repo is a collection of MCP servers and Claude Code skills for developer productivity. Each tool lives in its own subdirectory with its own `README.md` and `CLAUDE.md`.

## MCPs

| Directory | What it does |
|-----------|-------------|
| `codesearch/` | Full-text + structural C# code search over a large monorepo via Typesense + tree-sitter. MCP tools: `search_code`, `query_cs`, `service_status`. |
| `d3figurer/` | Server-side D3.js figure renderer. Runs a persistent Chrome/Puppeteer process and exposes `render_figure`, `check_figure`, `server_status` as MCP tools. Includes an 18-figure gallery. |

## Setup

Each MCP registers itself with Claude Code:

```
codesearch\setup_mcp.cmd    # Windows — registers codesearch MCP
d3figurer\setup_mcp.cmd     # Windows — registers d3figurer MCP
```

Both delegate to a `.sh` script via WSL. After running, restart Claude Code.

## Repository conventions

- MCP source files live in the repo (on `/mnt/c/`); npm packages and runtime files go on the **Linux FS** (`~/.d3figurer-work/`, `~/.local/mcp-venv/`) — never `npm install` or `pip install` into `/mnt/c/`.
- `*.pid` and `*.log` are excluded by `.gitignore`.
- `d3figurer/gallery/output/` is excluded — it is generated by CI.

## GitHub Pages — gallery preview

The d3figurer gallery is built and deployed automatically on every push to `main` via `.github/workflows/static.yml`:

1. `server.sh install` — downloads npm packages + Chrome to the runner's `~/.d3figurer-work/`
2. `server.sh start --src-dir d3figurer/gallery` — starts Chrome + render server
3. `node bin/d3figurer.js batch d3figurer/gallery --src-dir d3figurer/gallery` — renders all 18 figures × 3 formats (PDF, PNG, SVG) and builds the preview HTML
4. `server.sh stop`
5. Deploys `d3figurer/gallery/output/` to GitHub Pages

**Live gallery:** https://mcroomp.github.io/claudeskills/preview/

Pages root is `gallery/output/`, so:
- `preview/index.html` → gallery grid
- `png/*.png`, `svg/*.svg`, `pdf/*.pdf` → rendered figures (linked from preview)
